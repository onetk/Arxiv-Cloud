(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{14:function(t,e,n){t.exports=n(25)},19:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),o=n(8),s=n.n(o),c=(n(19),n(2)),i=n.n(c),l=n(3),u=n(9),h=n(10),p=n(12),g=n(11),f=n(13),d=n(4),E=n.n(d),v=(n(23),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_APIKEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_AUTHDOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_DATABASEURL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_PROJECTID,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_MESSAGINGSENDERID,appId:Object({NODE_ENV:"production",PUBLIC_URL:""}).FIREBASE_APPID}),m=new E.a.auth.GithubAuthProvider,k=function(){E.a.initializeApp(v);var t=E.a.auth();return{auth:function(){return t},login:function(){return t.signInWithPopup(m)},logout:function(){return t.signOut()}}}(),A=Object({NODE_ENV:"production",PUBLIC_URL:""}).BACKEND_API_BASE,S=function(t){var e=JSON.parse(t);console.log(e);for(var n=[],a=0;a<e.length;a++)n.push(r.a.createElement("div",{class:"TopStyle"},r.a.createElement("div",{class:"ArticleTitle"},e[a].title),r.a.createElement("div",{class:"ArticleBody"},e[a].body),r.a.createElement("div",{class:"ArticleTag"},"#",e[a].tag,"hoge #",e[a].tag,"fuga #",e[a].tag,"piyo")));return n},b=function(t){return t.message},y=function(t){var e=JSON.parse(t);console.log(e);for(var n=[],a=1;a<Object.keys(e).length;a++)n.push(r.a.createElement("div",{class:"TopStyle"},r.a.createElement("div",{class:"ArticleTitle"},e[a][0]),r.a.createElement("div",{class:"ArticleBody"},e[a][2]),r.a.createElement("div",{class:"ArticleTag"},"#",e[a][3]," #",e[a][4]," #",e[a][5])));return n};function O(t,e){return fetch(e).then(function(e){if(e.ok){if(200===e.status&&"PUT"===t)return"success!!";try{return JSON.parse(e),e.json()}catch(n){return e.text()}}if(e.status<500)throw new Error("4xx error");throw new Error("5xx error")})}var w=function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(p.a)(this,Object(g.a)(e).call(this))).state.user=null,t.state.message="",t.state.errorMessage="",t.state.token="",t.state.text="",t}return Object(f.a)(e,t),Object(h.a)(e,[{key:"getToken",value:function(){var t=Object(l.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==this.state.token){t.next=4;break}return t.next=3,k.auth().currentUser.getIdToken();case 3:this.state.token=t.sent;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this;k.auth().onAuthStateChanged(function(e){e?t.setState({user:e}):t.setState({user:null})})}},{key:"getPrivateMessage",value:function(){var t=this;this.state.user.getIdToken().then(function(t){return e=t,fetch("".concat(A,"/private"),{method:"get",headers:new Headers({Authorization:"Bearer ".concat(e)}),credentials:"same-origin"}).then(function(t){if(t.ok)return t.json();throw Error("Request rejected with status ".concat(t.status))});var e}).then(function(e){t.setState({message:e.message})}).catch(function(e){t.setState({errorMessage:e.toString()})})}},{key:"getAllArticles",value:function(){var t=this;O("GET","http://localhost:1991/articles").then(function(e){t.setState({message:S(e)})}).catch(function(e){t.setState({errorMessage:b(e)})})}},{key:"getAllTags",value:function(){O("GET","http://localhost:1991/tags").then(function(t){for(var e=[],n=JSON.parse(t),a=0;a<n.length;a++)e.push(n[a].tag);console.log(e.join(","))}).catch(function(t){console.log(t)})}},{key:"getPapers",value:function(){var t=Object(l.a)(i.a.mark(function t(){var e=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getToken();case 2:return t.abrupt("return",fetch("http://localhost:1991/articles/paper",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)},body:JSON.stringify({title:"ok",body:"google"})}).then(function(t){console.log(t),e.setState({message:y(t)})}).catch(function(t){e.setState({errorMessage:b(t)})}));case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"deleteArticles",value:function(){var t=Object(l.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getToken();case 2:return t.abrupt("return",fetch("http://localhost:1991/articles",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)}}));case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"postArticles",value:function(){var t=Object(l.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getToken();case 2:return t.abrupt("return",fetch("http://localhost:1991/articles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)},body:JSON.stringify({title:"ok",body:"google"})}));case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handleKeyDown",value:function(t){var e=this;if("Enter"===t.key){t.preventDefault(),this.setState({text:t.target.value}),console.log(this.state.text,"ok");var n=new URLSearchParams;n.set("keyword",this.state.text),O("GET","http://localhost:1991/paper?"+n.toString()).then(function(t){console.log("success"),e.setState({message:y(t)})}).catch(function(t){console.log("fail"),e.setState({errorMessage:b(t)})})}}},{key:"render",value:function(t,e){return null===e.user?r.a.createElement("button",{onClick:k.login},"Please login"):r.a.createElement("div",null,r.a.createElement("h2",{class:"title word"},r.a.createElement("a",{class:"title",href:"/"},"Arxiv Cloud")),r.a.createElement("div",{class:"search-form"},r.a.createElement("textarea",{class:"search-text",placeholder:"Search",onKeyDown:this.handleKeyDown.bind(this)}),r.a.createElement("img",{src:"search.png",alt:"search icon",class:"search-icon"})),r.a.createElement("div",{class:"state_messages"},e.message),r.a.createElement("div",{class:"StateErrDiv"},r.a.createElement("p",{class:"StateErrMessage"},e.errorMessage),r.a.createElement("button",{onClick:this.getAllArticles.bind(this)},"List message"),r.a.createElement("button",{onClick:this.getAllTags.bind(this)},"List Tag"),r.a.createElement("button",{onClick:this.deleteArticles.bind(this)},"Delete All"),r.a.createElement("button",{onClick:k.logout},"Logout")))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.b752a1aa.chunk.js.map